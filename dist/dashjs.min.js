!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t),function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!=u.config.baseResourceURL?this.uri=u.config.baseResourceURL+"/"+t:console.warn(new a("baseResourceURL config not set"))}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u.resources.get(this.uri+"/"+(e||""),t,n,o)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u.resources.create(this.uri,e,t,n)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=this.uri+"/"+e;u.resources.update(r,t,n,o)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.uri+"/"+e;u.resources.delete(o,t,n)}}])&&o(t.prototype,n),r&&o(t,r),e}();function i(e,t){this.name="FormInputsError",this.message=e,this.inputs=t}function a(e){this.name="ConfiguationError",this.message=e}function c(e){this.name="SelectorError",this.message=e}function s(e,t){this.name="TypeError",this.message=e,this.object=t}var u={handlers:{handleViewAnchorClick:function(e){e.preventDefault(),u.getView(e.currentTarget.getAttribute("data-name"))},reloadIfAutoReload:function(e){u.config.autoReload&&u.reloadContent()}},config:{activeForm:null,autoReload:!1,baseResourceURL:null,content:"#content",requestHeaders:{},triggerInitialViewFetch:!1,viewSelector:".view-anchor",reloadSelector:".reload",history:!1,appURL:window.location.href},state:{lastViewURL:null,lastViewName:null,lastViewAnchor:null,lastClickedActionButton:null,appURL:null,appTitle:null},views:[],actions:{},wait:function(e,t){window.setTimeout((function(){e.call()}),t)},select:function(e){return document.querySelector(e)},selectAll:function(e){return document.querySelectorAll(e)},url:function(e){if(this.config.baseResourceURL)return this.config.baseResourceURL+"/"+e;throw"Base URL not set in config"},getView:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={data:{},success:null,defaultCallback:!0,container:u.select(u.config.content)};o=Object.assign(o,n),"number"==typeof e?t=this.views[e]:this.views.forEach((function(n){n.getAttribute("data-name")==e&&(t=n)})),t&&(e=t.getAttribute("data-href"),u.state.lastViewAnchor=t),u.state.lastViewURL=e,this.request(u.state.lastViewURL,o.data,(function(e){var n=this;u.renderResponse(e,o.container).then((function(e){var r=t?t.getAttribute("data-name"):null;if("function"==typeof u.getView.then&&o.defaultCallback&&u.getView.then.call(n,r,e,u.select(u.config.content)),t&&u.config.history){var i=new String(u.state.appURL),a="/"!==i.charAt(i.length-1)?i+"/"+r:r;a=a.toLowerCase();var c={view:r};u.history.change(c,u.state.appTitle+" | "+r,a,(function(e){u.getView(e.view)}))}})).then((function(){"function"==typeof o.success&&o.success.call(n,e)})).catch(console.log.bind(console))}),Object.assign({method:"GET",isViewRequest:!0},o))},bind:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];function i(e,t){var n=e.parentNode;return n.matches(t)?n:i(n,t)}var a=document.querySelector(t);if(!a)throw new c(t+" does not any element in the DOM");a.addEventListener(e,(function(e){var t=e.target,r=t.matches(n),a=new RegExp("(,)","gim"),c=n.replace(a,(function(e){return" *,"})),s=t.matches(c.trim()+" *");if(r||s){var u=r?t:i(t,n);o.call(u,e)}}),r)},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)u.config[t]=e[t];this.config.requestHeaders["X-Requested-With"]="XMLHttpRequest",this.views=document.querySelectorAll(this.config.viewSelector),this.notify=this.config.notify;var n=document.querySelector(this.config.reloadSelector);if(n&&n.addEventListener("click",(function(e){u.reload()}),!1),u.state.appTitle=document.title,u.state.appURL=u.config.appURL,this.views.forEach((function(e,t){e.addEventListener("click",u.handlers.handleViewAnchorClick,!1)})),this.config.triggerInitialViewFetch)try{this.views[0].click()}catch(e){"TypeError"==e.name&&console.warn(new c("View selector does not match any element"))}u.events.init(),u.history.init()},bindData:function(e,t){e.querySelectorAll("[data-name]").forEach((function(e){var n=e.getAttribute("data-name"),o=t.querySelectorAll("[data-name="+n+"]");o.length&&o.forEach((function(t){t.matches("input, textarea")?t.value=e.value||e.innerText:t.innerText=e.value||e.innerText}))}))},request:function(e,t,n,o){var r={method:"POST",isViewRequest:!1,headers:{},progress:null,error:null,success:null,usePost:!1,tempOffAutoReload:!1,data:{}};for(var i in r)r.hasOwnProperty(i)&&(r[i]=o[i]||r[i]);var a=this,c=r.method.toUpperCase(),s="GET"==c,l="HEAD"==c,f="DELETE"==c,h=r.isViewRequest,d=Object.assign(this.config.requestHeaders,r.headers),p=new XMLHttpRequest;p.onreadystatechange=function(){switch(p.readyState){case XMLHttpRequest.OPENED:Object.keys(d).forEach((function(e){p.setRequestHeader(e,d[e])}));break;case XMLHttpRequest.DONE:try{var e=JSON.parse(p.responseText)}catch(t){e=p.responseText}p.status>=200&&p.status<300?"function"==typeof n&&n.call(p,e):"function"==typeof r.error&&r.error.call(p,e,p.status),h||"function"!=typeof u.request.then||u.request.then(e)}},p.onprogress=function(e){h&&"function"==typeof a.getView.progress?a.getView.progress(p,e,a.state.lastViewAnchor):h||"function"!=typeof a.request.progress||a.request.progress(p,e)},p.upload.onprogress=function(e){"function"==typeof r.progress&&r.progress.call(p,e)},p.onerror=function(e){"function"==typeof r.error&&r.error.call(p)},"[object Object]"!={}.toString.call(t)||s||f||(t=this.form.serializeMapData(t)),r.usePost&&t.append("_method","PATCH");var g=!1;if(f)for(var v in t)g=!0;return e=s||g?e+u.utility.encodeURL(t):e,p.open(c,e),p.send(s||l||g?null:t),p},get:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.request(e,t,n,Object.assign({method:"get"},o))},post:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.request(e,t,n,Object.assign({method:"post"},o))},renderResponse:function(e,t){var n=t;return new Promise((function(t,o){n.innerHTML="",n.insertAdjacentHTML("afterbegin",e),t(e)}))},reload:function(){window.location.reload()},reloadContent:function(){u.state.lastViewAnchor.click()},getActiveForm:function(){return document.querySelector(u.config.activeForm)},submit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,r=this.form.checkEmptyInputs,a=this.form.serializeData;u.bind("submit","body","#"+e,(function(e){e.preventDefault();var c=this;if(n){if(!Array.isArray(n)){var s=new i("Invalid args supplied for required inputs");return void("function"==typeof o?o.call(c,s):console.warn(s))}if(1==n.length&&"*"==n[0])var u=c.querySelectorAll("[name]:not(.not-required)");else u=n.map((function(e){return c.querySelector("[name="+e+"]")}));var l=r(u);if(l.empty){var f=new i("Some required inputs empty",l.input);return void("function"==typeof o?o.call(c,f):console.warn(f))}}t.call(c,e,a(c),c.action)}))},submitAll:function(e,t,n){this.submit(e,t,["*"],n)},form:{sanitize:function(e){(e||document.querySelector(u.config.activeForm)).querySelectorAll("input[type=text],input[type=password], input[type=email], input[type=telephone]").forEach((function(e){e.value="",e.blur()}))},checkEmptyInputs:function(e){for(var t={empty:!1,input:[]},n=0;n<e.length;n++){if(!e[n])throw"Required input element "+index+" supplied is null";""==e[n].value.trim()&&(t.empty=!0,t.input.push(e[n]))}return t},serializeData:function(e,t){var n=new FormData;return e.querySelectorAll("input[name], select[name], textarea[name]").forEach((function(e){if("file"==e.getAttribute("type")){var o=e.getAttribute("name");if(void 0!==e.files)for(var r=0;r<e.files.length;r++)n.append(o,e.files[r])}else(""!=e.value||t)&&("checkbox"!=e.getAttribute("type")||e.checked)&&n.append(e.getAttribute("name"),e.value)})),n},stringifyData:function(e){var t={};return e.forEach((function(e,n){t[n]=e})),JSON.stringify(t)},serializeMapData:function(e){var t=new FormData;for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[n]);return t}},resource:function(e){return new r(e)},resources:{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;u.request(e,n,t,Object.assign({method:"get"},o))},create:function(e,t,n,o){var r=e||u.getActiveForm().action;u.request(r,t,(function(e){u.resources.defaultCallback.call(this,n,e,o)}),Object.assign({method:"post"},o))},update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(e){u.resources.defaultCallback.call(this,n,e,o)};u.request(e||u.getActiveForm().action,t,r,Object.assign({method:o.usePost?"post":"patch"},o))},delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=function(e){u.resources.defaultCallback.call(this,t,e,n)};u.request(e,n.data||{},o,Object.assign({method:"delete"},n))},defaultCallback:function(e,t,n){"function"==typeof e&&e.call(this,t),n.tempOffAutoReload||u.handlers.reloadIfAutoReload(this)}},events:{bindActionEvents:function(){document.querySelectorAll("[data-action]");u.bind("click","body","[data-action]",(function(e){var t=this.getAttribute("data-action");u.state.lastClickedActionButton=this,u.actions[t].call(this,e)}))},init:function(){this.bindActionEvents()}},utility:{encodeURL:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},preview:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e[n];return o.type.startsWith("image/")?(window.URL=window.URL||window.webkitURL,new Promise((function(e,n){var r=new Image;r.src=window.URL.createObjectURL(o),r.file=o,r.style.maxWidth="100%",r.onload=function(){window.URL.revokeObjectURL(this.src),e({width:this.naturalWidth,height:this.naturalHeight})},t.appendChild(r)}))):(console.log("Files is not an image!"),!1)},search:function e(t,n,o){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Object.assign({cache:!1,display:"block"},i);if(e.results||(e.results={}),a.cache&&null!=e.results[t])r=e.results[t];else{var c=u.selectAll(n),l=Array.from(c);c.forEach((function(e){e.style.display="none"})),r=l.filter((function(e){try{var n=e.querySelector("[data-name="+o+"]").innerText,r=new RegExp(t,"i");return n.match(r)}catch(t){throw console.error(t),new s("[data-name] attribute not found on element",e)}})),!0===a.cache&&(e.results[t]=r)}r.length?r.forEach((function(e){e.style.display=a.display})):"function"==typeof a.null&&a.null.call(this,t)}},history:{current:null,popActions:[],entries:[],back:function(){window.history.back()},forward:function(){window.history.forward()},change:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;history.pushState(e,t||"#",n),this.current=window.location.href,this.entries.push(this.current),null!==o&&(this.popActions[this.current]=o),null!==t&&(document.title=t)},init:function(){window.addEventListener("popstate",(function(e){u.history.current=window.location.href,"function"==typeof u.history.popActions[u.history.current]&&u.history.popActions[u.history.current].call(e,e.state),u.history.entries.pop(),null!==e.state&&(document.title=e.state.title)}))}}};t.default=u}]);